
HLY 47<br />S2405-8440(15)30055-4<br />10.1016/j.heliyon.2015.e00047<br />001<br /><br />

<item-info>
<jid>HLY</jid>
<aid>47</aid>
<ce:article-number>e00047</ce:article-number>
<ce:pii>S2405-8440(15)30055-4</ce:pii>
<ce:doi>10.1016/j.heliyon.2015.e00047</ce:doi>
<ce:copyright type="unknown" year="2015"/>
</item-info>



package sampleworkout;

import java.io.*;
import org.xml.sax.*;
import javax.xml.parsers.*;
import javax.xml.transform.*;
import javax.xml.transform.stream.*;
import javax.xml.transform.sax.*;

public class ToXML {
	
				  BufferedReader in;
				  StreamResult out;

				 TransformerHandler th;
				 

				  public static void main (String args[]) {
				      new ToXML().begin();
				  }

				  public void begin () {
				    try{
				      in = new BufferedReader(new FileReader("D:/data.txt"));
				      out = new StreamResult("D:/data.xml");
				      openXml();
				      String str;
				      while ((str = in.readLine()) != null) {
				         process(str);
				      }
				      in.close();
				      closeXml();
				    }
				    catch (Exception e) {
				    	e.printStackTrace(); }
				    }
				


				  public void openXml() throws ParserConfigurationException,TransformerConfigurationException,SAXException{
					 
						 
						  SAXTransformerFactory tf=(SAXTransformerFactory)SAXTransformerFactory.newInstance();
						  th=tf.newTransformerHandler();
						  
						  Transformer serilizer=th.getTransformer();
						  serilizer.setOutputProperty("{http://xml.apache.org/xstl}indent-amount", "4");
						  serilizer.setOutputProperty(OutputKeys.INDENT, "yes");
						  th.setResult(out);
						  th.startDocument();
						  th.startElement(null, null, "inserts",null);
						  }
				  		  
				  		  public void process(String s) throws SAXException{
						  th.startElement(null, null, "option",null);
						  th.characters(s.toCharArray(), 0, s.length());
						  th.endElement(null, null, "option");
				  		  }
					  
					  	 
				  		  public void closeXml() throws SAXException{
						  th.endElement(null, null, "inserts");
						  th.endDocument();
						  
						  
					  }
					 
					  
					  
					  
				  }	 
				  
				  
				  
				  
				  
				  
 import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.sax.SAXTransformerFactory;
import javax.xml.transform.sax.TransformerHandler;
import javax.xml.transform.stream.StreamResult;

import org.xml.sax.SAXException;
import org.xml.sax.helpers.AttributesImpl;

/* 
 * This program reads a 4 lines text file land creates an XML structure around
 * the raw data. The XML structure is then copied to an xml output file. 
 */
public class Test {

    BufferedReader in;
    StreamResult out;

    TransformerHandler th;
    AttributesImpl atts;

    // Here's our entry point ... 
    public static void main(String args[]) {
        new Test().doit();
    }

    public void doit() {
        try {
            in = new BufferedReader(new FileReader("D:\\abc.txt"));
            out = new StreamResult(new FileWriter("D:\\abc.xml"));
            initXML();
            String str;
            // declare an array that can contain 4 strings
            String[] SArray=new String[4];
            int i = 0;

            while ((str = in.readLine()) != null) {
//              System.out.println("input line: " + str);
                SArray[i]=str;
                i++;

            }

            process(SArray);

            in.close();
            closeXML();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void initXML() throws ParserConfigurationException,
            TransformerConfigurationException, SAXException {
        // JAXP + SAX
        SAXTransformerFactory tf = (SAXTransformerFactory) SAXTransformerFactory
                .newInstance();

        th = tf.newTransformerHandler();
        Transformer serializer = th.getTransformer();
        serializer.setOutputProperty(OutputKeys.ENCODING, "ISO-8859-1");
        // pretty XML output
        serializer.setOutputProperty(
                "{http://xml.apache.org/xslt}indent-amount", "4");
        serializer.setOutputProperty(OutputKeys.INDENT, "yes");
        th.setResult(out);
        th.startDocument();
        atts = new AttributesImpl();
        th.startElement("", "", "item-info", atts);

    }

    public void process(String[] elements) throws SAXException {
//      System.out.println("number of elements: " + elements.length);
        atts.clear();

        th.startElement("", "", "jid", atts);
        th.characters(elements[0].toCharArray(), 0, elements[0].length());
        th.endElement("", "", "jid");

        th.startElement("", "", "aid", atts);
        th.characters(elements[1].toCharArray(), 0, elements[1].length());
        th.endElement("", "", "aid");

        th.startElement("", "", "amma", atts);
        th.characters(elements[2].toCharArray(), 0, elements[2].length());
        th.endElement("", "", "amma");

        th.startElement("", "", "anna", atts);
        th.characters(elements[3].toCharArray(), 0, elements[3].length());
        th.endElement("", "", "anna");

    }

    public void closeXML() throws SAXException {
        
        th.endElement("", "", "item-info");
        th.endDocument();
    }
}
					  
					  
					 
